var content='<div class="work-info">  <h2><a href="#">Прямоугольная ванна</a></h2>  <p>Современная эргономическая белая ванна. Дизайн Антонио Лупи (Antonio Lupi)</p>  <div class="work-materials">    В интерьере использованы материалы Tristone:    <ul class="work-materials-list">      <li class="work-materials-item"><a class="work-materials-link" href="#"><img alt="T-001" src="images/stones/t_001_mini.jpg">        <span>T-001</span>        Chalcedony</a></li>      <li class="work-materials-item"><a class="work-materials-link" href="#"><img alt="T-002" src="images/stones/t_002_mini.jpg">        <span>T-002</span>        Tourmaline</a></li>      <li class="work-materials-item"><a class="work-materials-link" href="#"><img alt="T-003" src="images/stones/t_003_mini.jpg">        <span>T-003</span>        Ambiance</a></li>    </ul>  </div>  <div class="work-dialer">    <p>      Фото предоставлено салоном интерьерных решений      <b>“Деко’ рум”, Екатеринбург</b>    </p>    <p><a href="#">Все работы салона</a></p>  </div></div><img alt="" class="work-image" height="600" src="images/works/work_dummy_big.jpg" width="800">',getContainer=function(o){var t=o.data("container");return t||(t=$('<div class="work-content">'),t.html(content),$(".work-popup").append(t),o.parent().index()>0&&t.find(".work-image").prop({src:o.find("img").prop("src")}),o.data("container",t),t.data("link",o)),t},showWork=function(){var o,t,e=$(this),n=e.parent(),r=getContainer(e),i=$(document),a=$(window),s=$(".work-popup");return $(".work-popup-prev").toggle(0!=n.index()),$(".work-popup-next").toggle(n.index()!=n.siblings().length),r.show().css({opacity:1}).addClass("work-content-current").siblings(".work-content").hide().css({opacity:0}).removeClass("work-content-current"),$(".overlay").show(),o=(a.height()-s.outerHeight())/2,t=(a.width()-s.outerWidth())/2,s.show().css({top:o>50?o+i.scrollTop():50+i.scrollTop(),left:t>0?t+i.scrollLeft():i.scrollTop()}),!1},prevWork=function(){var o=$(this).parent().find(".work-content-current"),t=o.data("link").parent().prev().find("a"),e=t.parent(),n=getContainer(t);return o.removeClass("work-content-current").animate({opacity:0,left:130},500,function(){o.hide()}),n.addClass("work-content-current").show().css({opacity:0,left:-30}).animate({opacity:1,left:50},500),$(".work-popup-prev").toggle(0!=e.index()),$(".work-popup-next").toggle(e.index()!=e.siblings().length),!1},nextWork=function(){var o=$(this).parent().find(".work-content-current"),t=o.data("link").parent().next().find("a"),e=t.parent(),n=getContainer(t);return o.removeClass("work-content-current").animate({opacity:0,left:-30},500,function(){o.hide()}),n.addClass("work-content-current").show().css({opacity:0,left:130}).animate({opacity:1,left:50},500),$(".work-popup-prev").toggle(0!=e.index()),$(".work-popup-next").toggle(e.index()!=e.siblings().length),!1},closeWork=function(){return $(".overlay, .work-popup").hide(),!1},refreshWorks=function(){return $(".work-popup .work-content").remove(),!1};$(document).ready(function(){$(".works-link").on("click",showWork),$(".popup-close").on("click",closeWork),$(".work-popup .work-popup-prev").on("click",prevWork),$(".work-popup .work-popup-next").on("click",nextWork)});